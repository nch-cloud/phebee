@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix phebee: <http://ods.nationwidechildrens.org/phebee#> .
@prefix obo: <http://purl.obolibrary.org/obo/> .

<http://ods.nationwidechildrens.org/phebee> a owl:Ontology ;
    owl:versionIRI <http://ods.nationwidechildrens.org/phebee/0.9.1> ;
    owl:imports <http://purl.org/dc/terms/> .

# Documentation of imported properties
dcterms:created rdfs:comment "Creation timestamp for PheBee resources. Used across all major entities in the PheBee graph." .

# Classes
phebee:Project a owl:Class ;
    rdfs:label "Project" ;
    rdfs:comment "A class representing a project." .

phebee:Subject a owl:Class ;
    rdfs:label "Subject" ;
    rdfs:comment "A class representing a subject." .

phebee:ProjectSubjectId a owl:Class ;
    rdfs:label "Project Subject ID" ;
    rdfs:comment "A class representing a project-specific subject identifier." .

phebee:Encounter a owl:Class ;
    rdfs:label "Encounter" ;
    rdfs:comment "A class representing a patient encounter." .

phebee:ClinicalNote a owl:Class ;
    rdfs:label "Clinical Note" ;
    rdfs:comment "A class representing a clinical note from an electronic health record." ;
    rdfs:subClassOf phebee:TextSource .

phebee:TextSource a owl:Class ;
    rdfs:label "Text Source" ;
    rdfs:comment "A class representing any source of unstructured text." .

phebee:TextAnnotation a owl:Class ;
    rdfs:label "Text Annotation" ;
    rdfs:subClassOf phebee:Evidence ;
    rdfs:comment "An annotation over a span of text from a clinical text source." .

phebee:Evidence a owl:Class ;
    rdfs:label "Evidence" ;
    rdfs:comment "A class representing evidence supporting a claim or association." .

phebee:Creator a owl:Class ;
    rdfs:label "Creator" ;
    rdfs:comment "A person or system responsible for creating an annotation." .

phebee:HumanCreator a owl:Class ;
    rdfs:subClassOf phebee:Creator ;
    rdfs:label "Human Creator" ;
    rdfs:comment "A human responsible for creating a text annotation." .

phebee:AutomatedCreator a owl:Class ;
    rdfs:subClassOf phebee:Creator ;
    rdfs:label "Automated Creator" ;
    rdfs:comment "A system or algorithm responsible for creating a text annotation." .

phebee:TermLink a owl:Class ;
    rdfs:label "Term Link" ;
    rdfs:comment "A class representing a link between a subject and a term." .

# Properties
phebee:projectId a owl:DatatypeProperty ;
    rdfs:domain phebee:Project ;
    rdfs:range xsd:string ;
    rdfs:label "Project ID" ;
    rdfs:comment "A unique identifier for a project." .

phebee:hasProjectSubjectId a owl:ObjectProperty ;
    rdfs:domain phebee:Subject ;
    rdfs:range phebee:ProjectSubjectId ;
    rdfs:label "Has Project Subject ID" ;
    rdfs:comment "Links a subject to their project-specific subject ID." .

phebee:hasProject a owl:ObjectProperty ;
    rdfs:domain phebee:ProjectSubjectId ;
    rdfs:range phebee:Project ;
    rdfs:label "Has Project" ;
    rdfs:comment "Links a project-specific subject ID to a project." .

phebee:hasSubject a owl:ObjectProperty ;
    rdfs:domain phebee:Encounter ;
    rdfs:range phebee:Subject ;
    rdfs:label "Encounter Subject" ;
    rdfs:comment "The subject an Encounter is associated with." .

phebee:encounterId a owl:DatatypeProperty ;
    rdfs:domain phebee:Encounter ;
    rdfs:range xsd:string ;
    rdfs:label "Encounter ID" ;
    rdfs:comment "The identifier of the patient encounter." .

phebee:encounterStart a owl:DatatypeProperty ;
    rdfs:domain phebee:Encounter ;
    rdfs:range xsd:dateTime ;
    rdfs:label "Encounter Start" ;
    rdfs:comment "The date and time the encounter began." .

phebee:encounterEnd a owl:DatatypeProperty ;
    rdfs:domain phebee:Encounter ;
    rdfs:range xsd:dateTime ;
    rdfs:label "Encounter End" ;
    rdfs:comment "The date and time the encounter ended." .

phebee:clinicalNoteId a owl:DatatypeProperty ;
    rdfs:domain phebee:ClinicalNote ;
    rdfs:range xsd:string ;
    rdfs:label "Clinical Note ID" ;
    rdfs:comment "The identifier of the clinical note." .

phebee:noteTimestamp a owl:DatatypeProperty ;
    rdfs:domain phebee:ClinicalNote ;
    rdfs:range xsd:dateTime ;
    rdfs:label "Note Timestamp" ;
    rdfs:comment "The date and time the note was created in the original source." .

phebee:hasEncounter a owl:ObjectProperty ;
    rdfs:domain phebee:ClinicalNote ;
    rdfs:range phebee:Encounter ;
    rdfs:label "Clinical Note Encounter" ;
    rdfs:comment "The encounter a ClinicalNote is associated with." .

phebee:providerType a owl:DatatypeProperty ;
    rdfs:domain phebee:ClinicalNote ;
    rdfs:range xsd:string ;
    rdfs:label "Provider Type" ;
    rdfs:comment "The role or specialty of the provider who authored the note." .

phebee:authorSpecialty a owl:DatatypeProperty ;
    rdfs:domain phebee:ClinicalNote ;
    rdfs:range xsd:string ;
    rdfs:label "Author Specialty" ;
    rdfs:comment "The medical specialty of the provider who authored the note." .

phebee:noteType a owl:DatatypeProperty ;
    rdfs:domain phebee:ClinicalNote ;
    rdfs:range xsd:string ;
    rdfs:label "Note Type" ;
    rdfs:comment "The type or category of the clinical note (e.g., Progress Note, Discharge Summary)." .

phebee:spanStart a owl:DatatypeProperty ;
    rdfs:domain phebee:TextAnnotation ;
    rdfs:range xsd:integer ;
    rdfs:label "Span Start" ;
    rdfs:comment "The start character offset of the annotation span." .

phebee:spanEnd a owl:DatatypeProperty ;
    rdfs:domain phebee:TextAnnotation ;
    rdfs:range xsd:integer ;
    rdfs:label "Span End" ;
    rdfs:comment "The end character offset of the annotation span." .

phebee:textSource a owl:ObjectProperty ;
    rdfs:domain phebee:TextAnnotation ;
    rdfs:range phebee:TextSource ;
    rdfs:label "Text Source" ;
    rdfs:comment "The source of the clinical text this annotation refers to." .

phebee:metadata a owl:DatatypeProperty ;
    rdfs:domain phebee:TextAnnotation ;
    rdfs:range xsd:string ;
    rdfs:label "Metadata" ;
    rdfs:comment "Additional structured data about the annotation, serialized as JSON." .

phebee:creatorId a owl:DatatypeProperty ;
    rdfs:domain phebee:Creator ;
    rdfs:range xsd:string ;
    rdfs:label "Creator ID" ;
    rdfs:comment "The identifier of the entity responsible for creating a node in the PheBee graph." .

phebee:creatorName a owl:DatatypeProperty ;
    rdfs:domain phebee:Creator ;
    rdfs:range xsd:string ;
    rdfs:label "Creator Name" ;
    rdfs:comment "The name of the entity responsible for creating a node in the PheBee graph." .

phebee:creatorVersion a owl:DatatypeProperty ;
    rdfs:domain phebee:Creator ;
    rdfs:range xsd:string ;
    rdfs:label "Creator Version" ;
    rdfs:comment "The version of the entity responsible for creating a node in the PheBee graph." .

phebee:version a owl:DatatypeProperty ;
    rdfs:domain phebee:AutomatedCreator ;
    rdfs:range xsd:string ;
    rdfs:label "Version" ;
    rdfs:comment "The version of the system or algorithm that created the annotation." .

phebee:creator a owl:ObjectProperty ;
    rdfs:domain [
        a owl:Class ;
        owl:unionOf (phebee:Evidence phebee:TermLink phebee:ClinicalNote)
    ] ;
    rdfs:range phebee:Creator ;
    rdfs:label "Creator" ;
    rdfs:comment "The creator (person or system) of the annotation." .

phebee:hasTermLink a owl:ObjectProperty ;
    rdfs:domain [
        a owl:Class ;
        owl:unionOf (phebee:Subject phebee:Encounter phebee:ClinicalNote)
    ] ;
    rdfs:range phebee:TermLink ;
    rdfs:label "Has Term Link" ;
    rdfs:comment "Connects to a term link." .

phebee:hasTerm a owl:ObjectProperty ;
    rdfs:domain [
        a owl:Class ;
        owl:unionOf (phebee:TermLink phebee:Evidence)
    ] ;
    rdfs:range rdfs:Resource ;
    rdfs:label "Has Term" ;
    rdfs:comment "Links a subject term link to a term, with the term being an unspecified non-literal node." .

phebee:hasEvidence a owl:ObjectProperty ;
    rdfs:domain phebee:TermLink ;
    rdfs:range  phebee:Evidence ;
    rdfs:label "Has Evidence" ;
    rdfs:comment "Connects a TermLink to supporting Evidence." .

phebee:hasQualifyingTerm a owl:ObjectProperty ;
    rdfs:domain phebee:TermLink ;
    rdfs:range rdfs:Resource ;
    rdfs:label "Has Qualifying Term" ;
    rdfs:comment "Links a term link to a qualifying term that modifies the interpretation of the term link (e.g., negated, hypothetical)." .

phebee:evidenceType a rdf:Property ;
    rdfs:label "Evidence Type" ;
    rdfs:comment "Specifies the type of evidence using a term from the ECO ontology." ;
    rdfs:domain phebee:Evidence ;
    rdfs:range obo:ECO_0000000 .

phebee:assertionType a rdf:Property ;
    rdfs:label "assertion type" ;
    rdfs:comment "Specifies the type of assertion made by the evidence, using a term from the ECO ontology." ;
    rdfs:domain phebee:Evidence ;
    rdfs:range obo:ECO_0000217 .